<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chomp API Test Runner - Refactored</title>
  <link rel="stylesheet" href="/api-test-runner.css">
</head>
<body>
  <div class="container">
    <h1>Chomp API Test Runner - Refactored</h1>
    <p>Test all API endpoints with real data (via Test Runner Server on port 8080)</p>

    <div class="tabs">
      <button class="tab active" data-tab="tests">API Tests</button>
      <button class="tab" data-tab="schema">Database Schema</button>
      <button class="tab" data-tab="data">Database Data</button>
    </div>

    <div class="tab-content" id="tests">
      <div class="server-status">
        <div class="status">
          <h3>Test Runner Server (Backend Proxy)</h3>
          <p>Status: <span id="backend-status">Unknown</span></p>
        </div>
        <div class="status">
          <h3>Backend Server</h3>
          <p>Status: <span id="frontend-status">Unknown</span></p>
        </div>
      </div>

      <div class="tab-content" id="tests-content">
        <div class="button-container">
          <button id="connect-reset">Connect & Reset</button>
          <button id="superuser-login" class="primary-button">Login as Superuser</button>
          <button id="run-all-tests" disabled>Run All Tests</button>
          <button id="clear-log">Clear Log</button>
        </div>
        
        <div id="superuser-status" class="superuser-status">
          <span class="status-label">Superuser Status:</span>
          <span id="superuser-status-value" class="status-value status-not-authenticated">Not Authenticated</span>
        </div>
        
        <div class="test-categories">
            <div class="category">
              <h3>Health & Authentication</h3>
              <div class="category-tests" data-category="health-auth"></div>
            </div>
            <div class="category">
              <h3>Admin Operations</h3>
              <div class="category-tests" data-category="admin-ops"></div>
            </div>
            <div class="category">
              <h3>Core Public Data</h3>
              <div class="category-tests" data-category="core-public"></div>
            </div>
            <div class="category">
              <h3>Search & Location</h3>
              <div class="category-tests" data-category="search-location"></div>
            </div>
             <div class="category">
              <h3>User Account</h3>
              <div class="category-tests" data-category="user-account"></div>
            </div>
            <div class="category">
              <h3>List Management</h3>
              <div class="category-tests" data-category="list-management"></div>
            </div>
            <div class="category">
              <h3>Engagement</h3>
              <div class="category-tests" data-category="engagement"></div>
            </div>
             <div class="category">
              <h3>Content Submission</h3>
              <div class="category-tests" data-category="content-submission"></div>
            </div>
            <div class="category">
              <h3>Trending & Analytics</h3>
              <div class="category-tests" data-category="trending-analytics"></div>
            </div>
        </div>
      </div>

      <div class="results-panel">
        <div class="results-header">
          <h2>Test Results</h2>
          <div class="results-controls">
            <button id="expand-all">Expand All</button>
            <button id="collapse-all">Collapse All</button>
          </div>
        </div>
        <div id="test-log"></div>
      </div>

      <h2>Test Summary</h2>
      <div id="test-summary">
        <div id="summary-content">Connect to servers and run tests to see results.</div>
        <div class="summary-controls">
          <button id="copy-results">Copy All Results</button>
        </div>
      </div>
      <div id="test-results" class="test-results-container"></div>
    </div>

    <div class="tab-content" id="schema" style="display: none;">
      <div class="schema-controls">
        <button id="load-schema">Load Database Schema</button>
        <button id="refresh-schema">Refresh Schema</button>
      </div>
      <div id="schema-content">Loading database schema...</div>
      <div id="schema-error" style="display: none;">Error loading database schema. Please check server connection.</div>
    </div>

    <div class="tab-content" id="data" style="display: none;">
      <div class="data-controls">
        <button id="load-data">Load Database Data</button>
        <button id="refresh-data">Refresh Data</button>
      </div>
      <div class="table-selector">
        <label for="table-select">Select Table:</label>
        <select id="table-select"><option value="">-- Select a table --</option></select>
      </div>
      <div id="data-content">Select a table to view its data.</div>
      <div id="data-error" style="display: none;">Error loading database data. Please check server connection.</div>
    </div>

    <script src="app-bundle.js"></script>
  </div>
</body>
</html>